.row
  .col-sm-1
  .col-sm-10

    %h3.content-header 動物編集
    .content
      .row
        .col-sm-10
        .col-sm-2
          = link_to '一覧に戻る', animals_path, :class => 'pull-right btn btn-primary'
      .row
        .col-sm-12
          - if controller.action_name == 'edit'
            .box.box-primary
              .box-header
                %h5 写真アップロード
              .box-body
                - if @animal_images.present?
                  - count = 0
                  - @animal_images.each do |images|
                    - if count % 3 == 0
                      %br
                    = image_tag images.image_url, :class => 'col-xs-3',  alt: '参照先に画像が無いよ！', size: '300x225'
                    = link_to '✖',remove_image_animals_path(images.id), data: { confirm: '本当に削除しますか？' }, class: 'col-xs-1'
                    - count += 1

                .col-sm-3
                  = form_for @animal_image, :url => {:action => 'animal_image_upload' } do |ai|
                    .field
                      = ai.file_field :image, :class => 'form-control', :id => 'image_input', :onChange => 'controlImageSubmitButton()'
                    .field
                      = ai.hidden_field :animal_id, :value => @animal.id
                    %div{style:"padding: 5pt"}
                    %actions
                      = ai.submit @images_save_button, :class => 'btn btn-success center-block', :id => 'image_submit'
              %div{style:"padding: 20pt"}
      = render 'form'

-# :javascript
-#   $(function() {

-#       //画像ファイルプレビュー表示のイベント追加 fileを選択時に発火するイベントを登録
-#     $('#image_input').on('change', 'input[type="file"]', function(e) {
-#       var file = e.target.files[0],
-#           reader = new FileReader(),
-#           $preview = $(".preview");
-#           t = this;

-#       // 画像ファイル以外の場合は何もしない
-#       if(file.type.indexOf("image") < 0){
-#         return false;
-#       }

-#       // ファイル読み込みが完了した際のイベント登録
-#       reader.onload = (function(file) {
-#         return function(e) {
-#           //既存のプレビューを削除
-#           $preview.empty();
-#           // .prevewの領域の中にロードした画像を表示するimageタグを追加
-#           $preview.append($('<img>').attr({
-#                     src: e.target.result,
-#                     width: "150px",
-#                     class: "preview",
-#                     title: file.name
-#                 }));
-#         };
-#       })(file);

-#       reader.readAsDataURL(file);
-#     });

-#   });